{"version":3,"sources":["../../src/pages/list-master/list-master.module.ts","../../src/pages/list-master/list-master.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { ListMasterPage } from './list-master';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ListMasterPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ListMasterPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    ListMasterPage\r\n  ]\r\n})\r\nexport class ListMasterPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list-master/list-master.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, ModalController, NavController } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Item } from '../../models/item';\r\nimport { Items } from '../../providers/providers';\r\n\r\nimport { AlertController } from 'ionic-angular';\r\nimport { Tab1Root } from '../pages';\r\n\r\nimport { Printer, PrintOptions } from '@ionic-native/printer';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-list-master',\r\n  templateUrl: 'list-master.html'\r\n})\r\nexport class ListMasterPage {\r\n  currentItems: Item[];\r\n\r\n  cantidad: any;\r\n\r\n  factura: any;\r\n  fecha: any;\r\n\r\n  cliente: any;\r\n\r\n  cbxProducto: any;\r\n\r\n  detalles: any;\r\n  total: any;\r\n\r\n  recibido: any;\r\n  vuelto: any;\r\n\r\n  isReadyToSave: boolean;\r\n\r\n  form: FormGroup;\r\n  form2: FormGroup;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    formBuilder: FormBuilder,\r\n    public items: Items,\r\n    public modalCtrl: ModalController,\r\n    public alertCtrl: AlertController,\r\n    private printer: Printer) {\r\n    this.factura = { id: 0 };\r\n\r\n\r\n    this.currentItems = this.items.query();\r\n\r\n    this.form = formBuilder.group({\r\n      name: ['', Validators.required]\r\n    });\r\n\r\n    this.form.valueChanges.subscribe((v) => {\r\n      this.isReadyToSave = this.form.valid;\r\n    });\r\n    this.refrescar();\r\n\r\n\r\n\r\n\r\n\r\n    //this.print()\r\n  }\r\n\r\n  refrescar() {\r\n    var data = [];\r\n\r\n    this.detalles = data;\r\n    this.items.crearFactura().subscribe((res) => {\r\n      this.factura = this.items.factura;\r\n      this.items.obtenerDetalles(this.factura.id).subscribe(res => {\r\n\r\n        this.detalles = res;\r\n        this.calcularTotal();\r\n      });\r\n\r\n      var fecha = new Date(this.factura.createdAt);\r\n      this.fecha = fecha.getDay() + \"/\" + fecha.getMonth() + \"/\" + fecha.getFullYear();\r\n\r\n      console.log(this.fecha)\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * The view loaded, let's query our items for the list\r\n   */\r\n  ionViewDidLoad() {\r\n  }\r\n  iniciar() {\r\n    //this.printer.isAvailable().then(this.onSuccess, this.onError);\r\n    console.log(this.printer.isAvailable());\r\n    // let options: PrintOptions = {\r\n    //      name: 'MyDocument',\r\n    //      duplex: true,\r\n    //      landscape: true,\r\n    //      grayscale: true\r\n    //    };\r\n\r\n    // this.printer.print('<h1>hello world</h1>', options).then(this.onSuccess, this.onError);\r\n\r\n  }\r\n\r\n  borrarDetalle(detalle) {\r\n    this.items.borrarProductoDetalle(detalle).subscribe(data => {\r\n      this.obtenerDetalles();\r\n    });\r\n  }\r\n\r\n  onSuccess() {\r\n    // console.log('bien');\r\n  }\r\n\r\n  openOther() {\r\n    //I called Api using service\r\n    let scope = this;\r\n    setTimeout(function () { scope.print(); }, 1000);\r\n  }\r\n\r\n  calcular() {\r\n\r\n    this.vuelto = (this.recibido - this.total).toFixed(2);\r\n\r\n  }\r\n\r\n \r\n\r\n  public print() {\r\n\r\n    var mywindow = window.open('', 'PRINT', 'height=400,width=600');\r\n\r\n    mywindow.document.write('<html><head><title>' + document.title  + '</title>');\r\n    mywindow.document.write('</head><body >');\r\n    mywindow.document.write('<h1>' + document.title  + '</h1>');\r\n    mywindow.document.write(document.getElementById('boleta').innerHTML);\r\n    mywindow.document.write('</body></html>');\r\n\r\n    mywindow.document.close(); // necessary for IE >= 10\r\n    mywindow.focus(); // necessary for IE >= 10*/\r\n\r\n    mywindow.print();\r\n    mywindow.close();\r\n\r\n    return true;\r\n\r\n  //   var printContents = document.getElementById('boleta').innerHTML;\r\n  // var popupWin = window.open('', '_blank', 'width=600,height=600');\r\n  // popupWin.document.open();\r\n  // popupWin.document.write('<html><head><link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" /></head><body onload=\"window.print()\">' + printContents + '</body></html>');\r\n  // popupWin.document.close();\r\n  // return true;\r\n\r\n\r\n\r\n    // var contenido= document.getElementById('boleta').innerHTML;\r\n    //  var contenidoOriginal= document.body.innerHTML;\r\n\r\n    //  document.body.innerHTML = contenido;\r\n\r\n    //  window.print();\r\n    //  window.close();\r\n\r\n    //  document.body.innerHTML = contenidoOriginal;\r\n  }\r\n\r\n  onError() {\r\n    // console.log('mal');\r\n  }\r\n\r\n  /**\r\n   * Prompt the user to add a new item. This shows our ItemCreatePage in a\r\n   * modal and then adds the new item to our data source if the user created one.\r\n   */\r\n  addItem() {\r\n    let addModal = this.modalCtrl.create('ItemCreatePage');\r\n    addModal.onDidDismiss(item => {\r\n      if (item) {\r\n        this.items.add(item);\r\n      }\r\n    })\r\n    addModal.present();\r\n  }\r\n\r\n  crearFactura(factura) {\r\n    this.factura = factura;\r\n\r\n\r\n  }\r\n\r\n  cambiarCliente() {\r\n    //console.log(this.cliente)\r\n\r\n    this.items.modificarCliente(this.cliente, this.factura.id)\r\n  }\r\n\r\n  obtenerDetalles() {\r\n    this.items.obtenerDetalles(this.factura.id).subscribe(res => {\r\n     \r\n      this.detalles = res;\r\n\r\n      this.calcularTotal();\r\n    });\r\n\r\n\r\n  }\r\n\r\n  calcularTotal() {\r\n\r\n\r\n\r\n    var detalle = this.detalles;\r\n\r\n    var aux = 0.00;\r\n    for (let index = 0; index < detalle.length; index++) {\r\n      aux += parseFloat(detalle[index].rawtotal);\r\n\r\n    }\r\n    this.total = 0.00;\r\n    this.total = aux.toFixed(2);\r\n  }\r\n\r\n  saludar() {\r\n\r\n\r\n    if (!this.form.valid) { return; }\r\n\r\n\r\n\r\n    this.items.buscarProductoCodigo(this.form.value.name).subscribe((resultado: any)=>{\r\n    if (resultado.length>0) {\r\n      \r\n         //  let addModal = this.modalCtrl.create('ItemCreatePage');\r\n    let addModal = this.modalCtrl.create('CantidadPage', { producto: {id: resultado[0].id}});\r\n    addModal.onDidDismiss(data => {\r\n      if (data) {\r\n        var detalle = {\r\n          factura: this.factura.id,\r\n          cantidad: data.cantidad,\r\n          producto: resultado[0].id,\r\n          precio: data.precio.precio,\r\n          unidad: data.precio.unidad.nombre\r\n        }\r\n    \r\n        this.items.generarIngreso(detalle).subscribe((res:any)=>{\r\n        \r\n         this.obtenerDetalles()\r\n        })\r\n      }\r\n \r\n      \r\n    })\r\n    addModal.present();\r\n    } else {\r\n      alert('No existe el cÃ³digo ingresado')\r\n    }\r\n    })\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n  /**\r\n   * Delete an item from the list of items.\r\n   */\r\n  deleteItem(item) {\r\n    this.items.delete(item);\r\n  }\r\n\r\n  /**\r\n   * Navigate to the detail page for this item.\r\n   */\r\n  openItem(item: Item) {\r\n    this.navCtrl.push('ItemDetailPage', {\r\n      item: item\r\n    });\r\n  }\r\n  comprobante() {\r\n    if (this.total == 0) {\r\n      let alert = this.alertCtrl.create({\r\n        title: 'Alerta!',\r\n        subTitle: JSON.stringify('No se puede imprimir un comprobante sin detalle '),\r\n        buttons: ['OK']\r\n      });\r\n      alert.present();\r\n    } else {\r\n      this.print();\r\n      this.refrescar();\r\n      // this.navCtrl.push(Tab1Root);\r\n      // this.navCtrl.remove\r\n\r\n\r\n\r\n    }\r\n\r\n  }\r\n\r\n  sincomprobante() {\r\n    if (this.total == 0) {\r\n      let alert = this.alertCtrl.create({\r\n        title: 'Alerta!',\r\n        subTitle: JSON.stringify('No se puede imprimir un comprobante sin detalle '),\r\n        buttons: ['OK']\r\n      });\r\n      alert.present();\r\n    } else {\r\n      this.refrescar();\r\n    }\r\n\r\n\r\n  }\r\n\r\n  cancelar() { }\r\n\r\n  updateList(ev) {\r\n    console.log(ev.target.value);\r\n  }\r\n\r\n  buscar() {\r\n    //  let addModal = this.modalCtrl.create('ItemCreatePage');\r\n    let addModal = this.modalCtrl.create('BuscarproductoPage');\r\n    addModal.onDidDismiss(producto => {\r\n      if (producto) {\r\n        let addModal = this.modalCtrl.create('CantidadPage', { producto: {id: producto.id}});\r\n        addModal.onDidDismiss(data => {\r\n          if (data) {\r\n            var detalle = {\r\n              factura: this.factura.id,\r\n              cantidad: data.cantidad,\r\n              producto: producto.id,\r\n              precio: data.precio.precio,\r\n              unidad: data.precio.unidad.nombre\r\n            }\r\n        \r\n            this.items.generarIngreso(detalle).subscribe((res:any)=>{\r\n            \r\n             this.obtenerDetalles()\r\n            })\r\n          }\r\n      \r\n          \r\n        })\r\n        addModal.present();\r\n      \r\n      }\r\n    })\r\n    addModal.present();\r\n  }\r\n\r\n  cobrar() {\r\n\r\n    let confirm = this.alertCtrl.create({\r\n      title: 'Imprimir comprobante?',\r\n      buttons: [\r\n        {\r\n          text: 'Imprimir comprobante',\r\n          handler: () => {\r\n            this.comprobante();\r\n          }\r\n        },\r\n        {\r\n          text: 'Sin comprobante',\r\n          handler: () => {\r\n            this.sincomprobante();\r\n          }\r\n        },\r\n        {\r\n          text: 'Cancelar',\r\n          handler: () => {\r\n            console.log('Agree clicked');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list-master/list-master.ts"],"sourceRoot":""}